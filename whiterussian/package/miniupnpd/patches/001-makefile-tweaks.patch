diff -urN miniupnpd-1.0-RC8.old/Makefile.openwrt miniupnpd-1.0-RC8.dev/Makefile.openwrt
--- miniupnpd-1.0-RC8.old/Makefile.openwrt	2007-05-02 15:13:05.000000000 +0200
+++ miniupnpd-1.0-RC8.dev/Makefile.openwrt	2007-11-21 16:15:06.000000000 +0100
@@ -2,7 +2,7 @@
 # http://miniupnp.free.fr/
 # Author : Thomas Bernard
 # for use with GNU Make
-include $(TOPDIR)/rules.mk
+#include $(TOPDIR)/rules.mk
 #CFLAGS = -Wall -O -D_GNU_SOURCE -g
 #CFLAGS = -Wall -Os -D_GNU_SOURCE
 #CC = mipsel-linux-gcc
@@ -11,7 +11,7 @@
 CFLAGS += -D_GNU_SOURCE
 RM = rm -f
 INSTALL = install
-IPTABLESINC=$(BUILD_DIR)/iptables-1.3.3/include
+IPTABLESINC = $(STAGING_DIR)/usr/include
 
 BASEOBJS = miniupnpd.o upnphttp.o upnpdescgen.o upnpsoap.o \
            upnpreplyparse.o minixml.o \
@@ -20,7 +20,7 @@
 
 LNXOBJS = linux/getifstats.o linux/iptcrdr.o
 
-LIBS = $(BUILD_DIR)/iptables-1.3.3/libiptc/libiptc.a
+LIBS = $(STAGING_DIR)/usr/lib -liptc
 
 TESTUPNPDESCGENOBJS = testupnpdescgen.o upnpdescgen.o
 
@@ -37,7 +37,8 @@
 install:	miniupnpd
 	@echo no install for now...
 
-miniupnpd:	$(BASEOBJS) $(LNXOBJS) $(LIBS)
+miniupnpd:	$(BASEOBJS) $(LNXOBJS)
+	$(CC) $(CFLAGS) -o $@ $(BASEOBJS) $(LNXOBJS) $(LIBS)
 
 testupnpdescgen:	$(TESTUPNPDESCGENOBJS)
 
